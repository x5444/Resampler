#include "ap_int.h"
#include <sstream>
#include "top.h"
#include "Resampler.h"


ap_int<14> testData[] = {
    2604,   2035,   1371,    659,    -48,   -701,  -1254,  -1671,  -1927,  -2010,  -1923,  -1681,  -1310,   -844,   -322,    216,    733,   1198,   1587,   1888,
    2098,   2225,   2284,   2296,   2283,   2268,   2267,   2290,   2340,   2407,   2473,   2513,   2497,   2390,   2164,   1794,   1265,    578,   -256,  -1208,
   -2234,  -3279,  -4280,  -5171,  -5887,  -6371,  -6577,  -6480,  -6069,  -5360,  -4388,  -3207,  -1888,   -510,    842,   2087,   3152,   3979,   4530,   4788,
    4763,   4485,   4003,   3385,   2705,   2040,   1464,   1040,    813,    808,   1028,   1455,   2048,   2749,   3491,   4201,   4808,   5248,   5478,   5467,
    5209,   4722,   4043,   3228,   2346,   1470,    676,     28,   -419,   -633,   -603,   -341,    120,    724,   1403,   2081,   2680,   3131,   3374,   3370,
    3103,   2581,   1837,    924,    -87,  -1115,  -2076,  -2887,  -3484,  -3814,  -3849,  -3589,  -3056,  -2298,  -1384,   -395,    580,   1453,   2146,   2596,
    2761,   2627,   2203,   1528,    660,   -320,  -1327,  -2265,  -3051,  -3609,  -3882,  -3838,  -3472,  -2805,  -1882,   -769,    450,   1687,   2853,   3865,
    4654,   5172,   5394,   5319,   4973,   4402,   3670,   2854,   2033,   1287,    684,    279,    107,    181,    492,   1008,   1679,   2443,   3225,   3952,
    4553,   4965,   5142,   5053,   4688,   4057,   3187,   2125,    924,   -348,  -1625,  -2839,  -3928,  -4841,  -5537,  -5988,  -6181,  -6116,  -5806,  -5275,
   -4554,  -3682,  -2701,  -1658,   -598,    433,   1392,   2235,   2929,   3437,   3732,   3790,   3598,   3150,   2449,   1511,    364,   -953,  -2389,  -3881,
   -5360,  -6751,  -7978,  -8969,  -9660, -10000,  -9955,  -9513,  -8683,  -7497,  -6011,  -4300,  -2455,   -576,   1232,   2869,   4244,   5283,   5932,   61,
      65,   5981,   5406,   4490,   3303,   1930,    463,  -1006,  -2391,  -3620,  -4638,  -5414,  -5939,  -6225,  -6306,  -6230,  -6055,  -5841,  -5646,  -5515,
   -5482,  -5562,  -5748,  -6015,  -6321,  -6612,  -6826,  -6901,  -6781,  -6425,  -5808,  -4926,  -3802,  -2480,  -1024,    484,   1956,   3297,   4422,   5257,
    5749,   5869,   5616,   5018,   4130,   3029,   1809,    572,   -577,  -1543,  -2247,  -2630,  -2664,  -2347,  -1709,   -806,    283,   1464,   2634,   3692,
    4547,   5120,   5359,   5237,   4753,   3936,   2841,   1539,    119,  -1327,  -2708,  -3939,  -4953,  -5701,  -6157,  -6316,  -6199,  -5844,  -5303,  -4639,
   -3917,  -3199,  -2539,  -1979,  -1546,  -1251,  -1089,  -1042,  -1079,  -1167,  -1269,  -1351,  -1386,  -1356,  -1256,  -1092,   -882,   -653,   -436,   -267,
    -177,   -193,   -332,   -601,   -993,  -1489,  -2057,  -2660,  -3254,  -3793,  -4236,  -4548,  -4703,  -4688,  -4504,  -4164,  -3694,  -3128,  -2508,  -1873,
   -1267,   -724,   -272,     73,    306,    432,    467,    434,    360,    275,    204,    167,    178,    240,    348,    486,    633,    765,    854,    878,
     820,    671,    435,    124,   -235,   -609,   -957,  -1237,  -1408,  -1435,  -1295,   -978,   -491,    143,    882,   1675,   2456,   3158,   3712,   4058,
    4147,   3948,   3453,   2675,   1652,    441,   -880,  -2223,  -3492,  -4596,  -5452,  -5991,  -6168,  -5964,  -5387,  -4475,  -3290,  -1918,   -457,    984,
    2299,   3389,   4173,   4591,   4613,   4236,   3490,   2434,   1148,   -270,  -1708,  -3056,  -4207,  -5072,  -5580,  -5687,  -5378,  -4668,  -3598,  -2239,
    -677,    988,   2651,   4208,   5566,   6645,   7390,   7764,   7760,   7390,   6692,   5720,   4542,   3233,   1869,    522,   -744,  -1877,  -2843,  -3619,
   -4200,  -4596,  -4824,  -4913,  -4892,  -4791,  -4635,  -4445,  -4231,  -3999,  -3740,  -3443,  -3091,  -2663,  -2142,  -1514,   -773,     79,   1028,   2051,
    3113,   4171,   5176,   6078,   6828,   7380,   7702,   7769,   7575,   7124,   6442,   5565,   4546,   3443,   2324,   1256,    301,   -484,  -1054,  -1379,
   -1446,  -1260,   -843,   -235,    514,   1340,   2177,   2956,   3613,   4090,   4343,   4343,   4076,   3548,   2781,   1816,    703,   -495,  -1712,  -2876,
   -3922,  -4793,  -5441,  -5834,  -5954,  -5802,  -5394,  -4761,  -3946,  -3004,  -1993,   -971,      3,    880,   1621,   2198,   2597,   2821,   2883,   2812,
    2644,   2422,   2193,   2001,   1885,   1874,   1992,   2242,   2618,   3099,   3653,   4235,   4797,   5286,   5651,   5845,   5832,   5586,   5097,   4372,
    3432,   2314,   1069,   -244,  -1559,  -2807,  -3925,  -4854,  -5550,  -5980,  -6129,  -6000,  -5614,  -5006,  -4225,  -3332,  -2390,  -1465,   -617,     99,
     642,    986,   1121,   1054,    808,    421,    -61,   -582,  -1085,  -1516,  -1827,  -1981,  -1955,  -1740,  -1347,   -800,   -141,    580,   1303,   1967,
    2512,   2883,   3038,   2946,   2594,   1986,   1146,    112,  -1066,  -2324,  -3597,  -4815,  -5916,  -6843,  -7553,  -8015,  -8220,  -8169,  -7883,  -7396,
   -6753,  -6004,  -5205,  -4407,  -3658,  -2994,  -2445,  -2024,  -1729,  -1551,  -1466,  -1444,  -1451,  -1450,  -1409,  -1300,  -1110,   -829,   -465,    -31,
     443,    924,   1373,   1749,   2015,   2137,   2094,   1873,   1476,    914,    214,   -589,  -1451,  -2325,  -3163,  -3919,  -4554,  -5039,  -5355,  -5495,
   -5462,  -5273,  -4952,  -4529,  -4037,  -3509,  -2973,  -2452,  -1962,  -1509,  -1092,   -698,   -313,     85,    514,    994,   1536,   2143,   2812,   3525,
    4257,   4976,   5639,   6205,   6632,   6882,   6927,   6748,   6344,   5725,   4919,   3966,   2917,   1831,    771,   -202,  -1034,  -1682,  -2114,  -2319,
   -2299,  -2077,  -1690,  -1188,   -629,    -76,    412,    779,    982,    991,    794,    395,   -184,   -907,  -1724,  -2579,  -3413,  -4169,  -4796,  -5252,
   -5511,  -5562,  -5409,  -5072,  -4585,  -3992,  -3344,  -2691,  -2087,  -1575,  -1192,   -963,   -900,  -1004,  -1263,  -1655,  -2151,  -2717,  -3318,  -3920,
   -4492,  -5010,  -5453,  -5809,  -6072,  -6240,  -6315,  -6299,  -6197,  -6011,  -5743,  -5392,  -4956,  -4435,  -3827,  -3134,  -2364,  -1529,   -651,    245,
    1125,   1950,   2679,   3273,   3694,   3913,   3912,   3685,   3241,   2606,   1819,    932,      8,   -886,  -1683,  -2319,  -2744,  -2921,  -2828,  -2466,
   -1855,  -1035,    -61,   1001,   2080,   3101,   4002,   4728,   5243,   5531,   5597,   5466,   5182,   4803,   4395,   4025,   3755,   3637,   3704,   3968,
    4420,   5025,   5730,   6465,   7149,   7700,   8041,   8108,   7855,   7263,   6341,   5125,   3681,   2095,    470,  -1084,  -2456,  -3548,  -4279,  -4597,
   -4480,  -3941,  -3026,  -1812,   -402,   1086,   2525,   3792,   4779,   5399,   5594,   5343,   4661,   3597,   2234,    679,   -947,  -2515,  -3903,  -5004,
   -5736,  -6046,  -5920,  -5376,  -4472,  -3291,  -1939,   -537,    792,   1934,   2792,   3291,   3391,   3084,   2395,   1381,    127,  -1270,  -2698,  -4050,
   -5227,  -6150,  -6762,  -7037,  -6978,  -6618,  -6013,  -5240,  -4386,  -3543,  -2794,  -2213,  -1849,  -1733,  -1865,  -2221,  -2753,  -3396,  -4074,  -4705,
   -5212,  -5529,  -5608,  -5421,  -4967,  -4267,  -3370,  -2337,  -1247,   -182,    776,   1552,   2087,   2342,   2300,   1969,   1377,    574,   -374,  -1392,
   -2404,  -3335,  -4119,  -4708,  -5068,  -5187,  -5073,  -4753,  -4266,  -3665,  -3008,  -2352,  -1751,  -1249,   -876,   -652,   -575,   -635,   -808,  -1060,
   -1353,  -1647,  -1905,  -2095,  -2193,  -2188,  -2073,  -1857,  -1552,  -1178,   -758,   -315,    129,    558,    959,   1327,   1660,   1962,   2240,   2500,
    2749,   2988,   3215,   3424,   3601,   3728,   3786,   3752,   3606,   3333,   2922,   2373,   1693,    901,     23,   -905,  -1845,  -2754,  -3591,  -4319,
   -4909,  -5342,  -5608,  -5712,  -5668,  -5499,  -5236,  -4912,  -4561,  -4213,  -3892,  -3611,  -3374,  -3173,  -2992,  -2804,  -2582,  -2293,  -1911,  -1414,
    -793,    -50,    796,   1715,   2662,   3584,   4420,   5110,   5599,   5840,   5804,   5478,   4871,   4012,   2952,   1759,    512,   -700,  -1790,  -2675,
   -3288,  -3577,  -3516,  -3102,  -2360,  -1337,   -102,   1257,   2648,   3973,   5138,   6065,   6691,   6976,   6906,   6492,   5771,   4799,   3651,   2411,
    1165
};


int main(){
	ap_uint<32> sampleRateFactor = (ap_uint<32>)(1.5f * (float)Resampler::getStepWidth());
	for (int k_Smp = 0; k_Smp < 1000; k_Smp++) {
		ap_int<14> DataIn = testData[k_Smp];
		ap_int<14> DataOut;
		bool enableOut;
		top(sampleRateFactor, DataIn, DataOut, enableOut);
		if (enableOut) {
			std::cout << k_Smp << " : " << DataOut << ", " << std::endl;
		}
	}
}
